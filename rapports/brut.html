<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rapport Ludovic Vagner</title>
    <link rel="stylesheet" href="../style.css" />
    <script src="../scripts/nav.js" defer></script>
  </head>

  <body>
    <header>
      <h2>Journal de bord</h2>
    </header>
    <nav class="pages"></nav>
    <main class="brut">
      <section>
        <time datetime="01-06">06/01/2025</time>
        <h2>Analyse des services de OVHCloud</h2>
        <img src="../images/sem1/01-06_01.png" alt="services ovh" />
        <ul>
          <li>
            Offre d'hébergement PRO, 79.08€ par ans HT. Accès SSH, ce qui ne
            sera peut être pas nécessaire si aucun besoin de s'authentifier pour
            les utilisateurs.
          </li>
          <li>
            Offre d'hébergement PERSO, 39.48€ par ans HT. Accès FTP qui ne sera
            sûrement pas utilisée dans tout les cas.
          </li>
        </ul>
        <p>
          les deux offres ont l'option WordPress en 1 clique, donc peut importe
          l'offre choisi, il sera possible de créer le site web.
        </p>

        <h2>Analyse de marché (sites web)</h2>
        <p>The andsome cafe</p>
        <img src="../images/sem1/01-06_02.png" alt="andsome cafe webpage" />
        <p>Simpliste mais élégant</p>
        <p>Coffee and plants (la)</p>
        <img
          src="../images/sem1/01-06_03.png"
          alt="Coffee and plants webpage"
        />
        <p>Un brin de folie</p>
        <img src="../images/sem1/01-06_04.png" alt="brin de folie webpage" />
        <p>Un bon site sur lequel se baser mais beaucoup de menus.</p>
        <p>
          les pages web sont divisées en sous parties afin d'avoir une meilleur
          structure du site web, chaque sous partie pointe vers une autre page,
          ce qu'on ne fera peut-être pas.
        </p>
        <p>Il faut que je commence a réfléchir a la mise en page.</p>
        <p>Site avec des OnePagers (site a une page) pour inspiration.</p>
        <img src="../images/sem1/01-06_05.png" alt="OnePager webpage" />
        <p>A demander si cela convient, et plus d'informations.</p>
        <p>
          Utilisation de <a href="https://www.lipsum.com/">Lorem Ipsum</a> pour
          générer du texte temporaire lors de création de maquette.
        </p>
        <p>Avoir moins peur de demander.</p>
        <img src="../images/sem1/01-06_06.png" alt="maquette" />
        <p>Téléchargé les polices utilisée et la logotheque.</p>
        <img src="../images/sem1/01-06_07.png" alt="logo artimbale" />
        <p>Récupérer Avis Google, lien carte Google Map.</p>
        <p>
          Regarder comment faire / si c'est déjà fait sur un plugin WordPress.
        </p>
      </section>

      <section>
        <time datetime="01-07">07/01/25</time>
        <p>Faire page en construction pour le site.</p>
        <p>Fait du PIX.</p>
        <p>
          Fait 1 exercice de
          <a href="https://www.theodinproject.com/">Odin projet</a>.
        </p>
        <p>FileZilla installé.</p>
        <p>Refaire installation WordPress manuellement sur le serveur.</p>
        <p>Utiliser la documentation WordPress pour développer le thème.</p>
        <h2>Installation manuel de WordPress</h2>
        <p>
          Utilise
          <a
            href="https://wordetweb.com/word-et-web/WORDPRESS-guide-installation-de-WordPress-premier-domaine-chez-OVH-FR.htm"
            >ce guide</a
          >
          pour installation sur OVH.
        </p>
        <p>Sauvegarde des identifiants dans un coffre-fort de mot de passe.</p>
        <p>
          Site crée:
          <img src="../images/sem1/01-07_01.png" alt="page admin wordpress" />
        </p>
        <p>
          Changement du préfixe dans la base de données, admin perds ces droits
          <img src="../images/sem1/01-07_02.png" alt="page index wordpress" />
          <img
            src="../images/sem1/01-07_03.png"
            alt="page erreur acces wordpress"
          />
        </p>
        <p>
          Retour en arrière sur le manipulations, utilisation du plugin
          <a href="https://wordpress.org/plugins/brozzme-db-prefix-change/">
            Brozzme DB Prefix & Tools Addons
          </a>
          pour effectuer le changement.
        </p>
        <p>
          Changement de l'icon du site, en attente de son apparition sur le
          site.
        </p>
      </section>

      <section>
        <time datetime="01-08">08/01/2025</time>
        <p>Loupé réveil ce matin, arrivé une dizaine de minutes en retard.</p>
        <p>
          Installation <a href="https://fr.wikipedia.org/wiki/LAMP">LAMP</a> sur
          mon ordinateur portable pour créer un environnement de développement.
        </p>
        <p>Difficulté d'effectuer l'installation pour près de 2 heures.</p>
        <p>1 heure de plus pour installer wordpress sur lamp.</p>
        <p>
          Appris un peu de gestion de permissions de fichier
          <a
            href="https://www.softwaretestinghelp.com/unix-file-access-permissions/"
          >
            (chmod, chown, chgrp )</a
          >, raison: simplifier le developpement sur l'environnement local en
          supprimant la nécessité d'avoir les permissions suffisant
        </p>

        <h4>NE PAS OUBLIER A CHANGER LORS DU TRANSFERT</h4>

        <p>
          Ludivine m'a dit de tenter plein de chose tant que c'est le début du
          stage, créer son propre thème wordpress, plugin?
        </p>
        <p>
          Lecture du
          <a href="https://developer.wordpress.org/themes/">theme handbook</a>
          de wordpress pour créer theme perso
        </p>
      </section>

      <section>
        <time datetime="01-09">09/01/2025</time>
        <p>Continue lecture handbook, création d'un thème</p>
        <img src="../images/sem1/01-09-01.png" alt="theme artimbale" />
        <p>
          Ajout d'une police utilisée par artimbale, problème dans la coloration
        </p>
        <img src="../images/sem1/01-09_02.png" alt="Code de police" /><img
          src="../images/sem1/01-09-03.png"
          alt="Police non coloré"
        />
        <p>Corrigé le problème en changeant le fichier utilisé</p>
        <img src="../images/sem1/01-09-04.png" alt="Police coloré" />
        <p>Création de tailles</p>
        <p>Ajout d'une seconde police pour le texte du site</p>
        <p>
          Création de
          <a
            href="https://developer.wordpress.org/themes/templates/template-parts/"
            >template part</a
          >
          en suivant le handbook .
        </p>

        <p>
          Regarder les droits copyright des polices en plus de détails demain.
        </p>
        <p>Apprendre les patterns demain.</p>
      </section>

      <section>
        <time datetime="01-10">10/01/2025</time>
        <p>Ajoute mode développement sur wordpress local/lamp</p>
        <p>Problème a ajouter des patterns sur lamp</p>
        <p>Création de catégorie de patterns</p>
        <img src="../images/sem1/01-10_01.png" alt="code catégorie pattern" />
        <p>Le bloc core media-text est impossible à pré-configurer.</p>
        <p>Créer un pattern pour chaque section.</p>
        <p>Créer un pattern pour les posts</p>
        <p>J'ai réussi a pré-configurer le bloc core media-text.</p>
        <img
          src="../images/sem1/01-10_02.png"
          alt="code block core media-text"
        />
      </section>

      <section>
        <time datetime="01-13">13/01/2025</time>
        <p>Confirmation de sections désirées et création de maquette.</p>
        <ul>
          <li>Présentation / Histoire</li>
          <li>Café (menu, photo)</li>
          <li>Bazar (photo objets)</li>
          <li>Herboristerie</li>
          <li>Agenda</li>
          <li>Contact, emplacement</li>
        </ul>
        <img src="../images/sem2/01-13_01.png" alt="maquette présentation" />
        <img src="../images/sem2/01-13_02.png" alt="maquette café" />
        <img src="../images/sem2/01-13_01.png" alt="maquette bazar" />
        <p>
          Se baser sur un calendrier papier pour l'agenda? ( choix par mois ou
          semaine), chaque semaine prend une ligne de lundi a dimanche.
        </p>
        <p>Comment le mettre à jour est aussi un problème.</p>
        <img src="../images/sem2/01-13_04.png" alt="maquette agenda" />
      </section>

      <section>
        <time datetime="01-14">14/01/2025</time>
        <p>Demandée avis sur maquette des sections.</p>
        <p>Commencée rapport de stage sur site hébergé par Git Hub.</p>
        <p>
          Problème avec la programmation du rapport de stage, backslash
          s'échappe mal dans la console mais correctement dans l'exécution.
        </p>
        <p>Création d'une maquette pour le rapport de stage.</p>
        <img
          src="../images/sem2/01-14_01.png"
          alt="maquette rapport de stage"
        />
        <p>
          Après vu ensemble avec Gaëlle et Ludivine, enlever l'arrière plan
          coloré en préférence, donnée plusieurs site a utiliser pour
          inspiration, re-touche des maquettes.
        </p>
        <p>
          Accepté pour la plupart, possiblement images de tailles différentes
          pour le bazar.
        </p>
        <p>
          Retour sur le developpement de theme wordpress pour la section/paterne
          histoire
        </p>
      </section>

      <section>
        <time datetime="01-15">15/01/2025</time>
        <p>
          Toujours en train de développer le thème, réussi a mettre en place la
          taille du contenu mais ne comprends pas encore comment aligner le
          texte a gauche.
        </p>
        <p>J'ai trouvé, je suis un abruti!</p>
        <p>Il suffit d'ajouter du padding horizontale au bloque conteneur.</p>
        <img src="../images/sem2/01-15_01.png" alt="padding block" />
        <p>Création de padding custom.</p>
        <p>
          Trouvé comment créer des éléments sections avec des bloques conteneur,
          certain ont l'option:
        </p>

        <pre>HTML element.</pre>
        <p>
          Cette option permet de choisir quelle éléments va être crée dans le
          DOM.
        </p>
        <p>
          Recherche de documentation sur les bloques de wordpress pour savoir
          lequel utilisé pour créer une gallerie d'article.
        </p>
        <p>
          Le loop wordpress, il est a utiliser dans la page template désirées.
        </p>
        <p>Prototype du loop qui sera utilisée:</p>
        <img src="../images/sem2/01-15_02.png" alt="code loop initial" />
        <p>Résultat:</p>
        <img src="../images/sem2/01-15_03.png" alt="résultat loop" />
        <p>On a des posts!</p>
        <p>
          Il faudra voir pour créer un paternes de postes pour simplifier
          l'ajout de nouveau postes si possible.
        </p>
        <p>
          Trouvé un thread wordpress qui sera sûrement amplement suffisant pour
          créer la fonctionnalité ("vol" de code) mais je désire comprendre le
          code donc il semble que je vais devoir lire la documentation pour les
          plugins, jusqu'au moins a la partie «hooks».
        </p>
      </section>

      <section>
        <time datetime="01-16">16/01/2025</time>
        <p>
          Pour créer un pattern, j'insère le pattern dans la page index, je le
          modifie avec l'éditeur en ligne, puis je copie le code de la page pour
          le pattern et le copie dans le fichier du pattern.
        </p>
        <p>Création d'un plugin de base / test:</p>
        <img
          src="../images/sem2/01-16_01.png"
          alt="plugin apparait dans page admin"
        />
        <p>
          Les plugins permet de créer des nouveaux «type» de post, séparé des
          posts de base wordpress
        </p>
        <img src="../images/sem2/01-16_02.png" alt="type post custom" />
        <p>Cela peut être utile pour le loop.</p>
        <p>
          Création d'un
          <a href="https://fr.wikipedia.org/wiki/Lien_symbolique">symlink</a>
          pour enregistrer le plugin dans le git du thème.
        </p>
        <p>
          (expliquer chaque concept comme symlink ou plugin dans le rapport de
          stage).
        </p>
        <p>
          Ajoute de licence GPL au plugin et au thème (aucune idée comment le
          faire proprement mais j'ai essayé au moins)
        </p>
        <p>
          Sûrement ajouter les types customs au thème pour simplifier la
          migration (en + je compte utilisé les posts custom pour les loops donc
          ils sont nécessaire au bon fonctionnement du thème).
        </p>
        <p>
          Possiblement utilisé le thème pour créer des types de posts et créer
          un plugin pour créer des carrousel (ligne d'objets, dans ce cas des
          posts), je peut donc diviser les fichiers entre l'apparence et la
          fonctionnalité.
        </p>
        <p>Dépanner imprimante wifi quand possible.</p>
        <p>
          Télétravail l'après-midi car je suis juste en train de lire la
          documentation sur les plugins, ce qui ne nécessite pas d'être présent
          pour le faire.
        </p>
        <p>
          Je ne pense pas que le plugin nécessite un menu mais on pourra en
          parler demain.
        </p>
        <p>Peut être un shortcode?</p>
        Sections du
        <a href="https://developer.wordpress.org/plugins/">handbook</a> vue:
        <ul>
          <li>Administration, l'endroit pour les paramètres du plugin</li>
          <li>
            shortcode, une balise qui exécute du code PHP, peut accepter des
            paramètres/arguments.
          </li>
          <li>
            Metadata, utilisé pour identifier des informations sur le post,
            possiblement utile, mais je n'en suis pas sûr.
          </li>
          <li>
            Custom post types, les postes customisé, on doit les enregistrer
            pour les utiliser. Il faut ajouter les types custom manuellement a
            la query de wordpress.
          </li>
          <li>
            Taxonomy, utilisé pour organiser des données, sûrement plus utile
            dans notre cas que les metadatas.
          </li>
          <li>
            Utilisateurs, explique des informations concernant les utilisateurs.
          </li>
          <li>Ne sera pas utilisé car non pertinent!</li>
          <li>
            JavaScript, démontre les différentes bibliothèques compris dans
            l'installation de wordpress, notamment jQuery.
          </li>
          <li>
            Cron, permet de programmer des taches, sera sûrement utilisé pour
            mettre a jour les informations récupéré d'Instagram.
          </li>
        </ul>
        <p>
          Réussi a modifier la query pour récupérer les posts du type café que
          j'avais crée plus tôt.
        </p>
        <p>
          Voir demain pour l'idée des taxonomies, puis l'affichage des posts
          dans les patterns.
        </p>
      </section>

      <section>
        <time datetime="01-17">17/01/2025</time>
        <p>
          Modification du type custom pour obtenir un résultat plus spécifique.
        </p>
        <p>
          Corrigé erreur dans menu admin où les postes de différents types
          s'affichait ensemble, c'est car l'action pre_get_posts est utilisé
          pour tout appele de posts, donc quand le menu appelait des posts pour
          afficher le cpt, l'action s'activait, et donc les modifications que
          j'avais effectuées se lançait, il a fallu ajouter un test pour
          s'assurer que l'action n'est pas appelé depuis un menu admin.
        </p>
        <p>Avis: a voir avec ludivine</p>
        <p>
          Ajouté des posts dans le type café, ils apparaissent dans le loop.
        </p>
        <p>
          Mal compris les pages templates, inutilisable avec les blocs? Bref, je
          n'arrive pas a les faire marcher.
        </p>
        <p>
          Je peux créer dans le plugin des paramètres pour choisir le post qui
          contient le template, puis après mettre a jour le contenu quand un
          nouveau post du même type est crée, c'est a dire automatiquement
          préparér la création de postes custom.
        </p>
        <p>
          Pour créer un scroll infinie, on pourrait utiliser une fonction
          javascript
        </p>
        <p>Regarder les paramètres du bloque scroll query.</p>
        <p>
          Tenté d'utilisé query vars comme la documentation l'explique, mais ça
          ne marche pas comme expliqué et sont efficacement inutilisable pour ce
          que je désire.
        </p>
      </section>

      <section>
        <time datetime="01-20">20/01/2025</time>
        <p>
          Continue d'essayer de modifier le query a l'exécution avec des actions
          wordpress, si je n'arrive pas je coderais directement dans le pattern.
        </p>
        <p>
          Suivi du block editor handbook pour créer un variation du bloque query
          loop.
        </p>
        <p>
          Ça à l'air bien trop compliqué et trop spécifique pour 2 utilisations,
          je vais donc juste écrire directement la requête dans les paternes.
        </p>
        <p>Écriture du second pattern.</p>
        <p>
          Mise en page des patterns, la barre de défilement est superposé aux
          éléments.
        </p>
        <p>Erreur trouve: Typo dans le nom de la variable</p>
        <img src="../images/sem3/01-20_01.png" alt="le coupable a été trouvé" />
        <p>manque un «-» entre wp et preset:</p>
        <p>typo correct:</p>
        <pre>--wp--preset--spacing--small</pre>
        <p>
          Liste de prix pour cafés/consommation, puis afficher certains
          produits/consommation sans les prix.
        </p>
        <p>Page admin pour les prix avec du PHP et un formulaire?</p>
        <p>
          Pour les carrousel: afficher le titre du post quand l'image est
          survolé?
        </p>
      </section>

      <section>
        <time datetime="01-21">21/01/2025</time>
        <p>
          Plugin va créer une option pour ajouter des prix a des postes, puis
          créer un bloque ou un pattern pour l'afficher.
        </p>
        <p>Quelque problème causé par un erreur de frappe.</p>
        <p>
          Travail pour le moment: créer plugin pour prix et mise en page du
          menu.
        </p>
        <p>
          Création d'une table de données si elle n'existe pas lors de
          l'activation du plugin.
        </p>
        <img src="../images/sem3/01-21_01.png" alt="code création table" />
        <p>
          Recherche d'un mot spécifique pour base de données, 10 minutes pour
          trouver:
        </p>

        <h4>«devise»</h4>
        <p>
          Lu de la documentation MySQL pour attribuer le bon charset a la table.
        </p>
        <p>
          Mal compris plusieurs fois l'utilité des nonces, ils sont a utilisé
          pour protéger au attaques de site externes spécifiquement.
        </p>
        <p>Demander a Ludivine et Gaêlle de décrire la boutique.</p>
        <p>Pointer vers une annonce ulule sauvegardé dans mes favoris.</p>
        <p>
          Problème a utiliser une fonction, il faut inclure un ficher pour
          l'utiliser.
        </p>
        <p>
          Bloqué 1 ou 2 heures sur les message d'admin, réussi au final de faire
          apparaître le message.
        </p>
      </section>

      <section>
        <time datetime="01-22">22/01/2025</time>
        <p>Utilisation du message d'admin pour tester les variables.</p>
        <img src="../images/sem3/01-22_01.png" alt="debug avec message admin" />
        <p>Récupération des différents types de postes.</p>
        <p>
          Regarder dans le handbook api / plugin pour la création d'un menu
          d'options.
        </p>
        <p>Champ option crée dans la base de données.</p>
        <img
          src="../images/sem3/01-22_02.png"
          alt="option sauvegardé dans la bdd"
        />
        <p>
          Difficulté a utiliser des fonctions de classe a l'intérieur d'une
          autre fonction de la classe
        </p>
        <p>Trouvé 2 méthode:</p>
        <ol>
          <li>
            <p>
              J'utilise la fonction d'instanciation de la classe que je store
              dans une variable, puis utilise la fonction depuis la variable.
            </p>
            <p>
              Très moche, et effectue l'équivalent de la seconde méthode mais
              depuis la classe elle même donc un peu plus dur a suivre.
            </p>
            <p>
              La raison pourquoi il est obligé d'utiliser l'instanciation et non
              simplement la pseudo-variable $this est car la méthode est
              statique et donc peut-être appelé hors d'un objet.
            </p>
            <img
              src="../images/sem3/01-22_03.png"
              alt="la fonction statique problèmatique"
            />
          </li>
          <li>
            J'enlève la méthode de statique, elle doit donc être forcement
            exécuté depuis un objet et la pseudo-variable fonctionne
            correctement. Cela permet un meilleur suivi dans le code principal
            et rend la fonction plus lisible.
          </li>
        </ol>
        <p>
          Création du formulaire d'option, la page fonctionne mais est vide.
        </p>
        <p>Recu mail pour les consignes du suivi du stage.</p>
        <p>Portfolio sur GitHub vendredi.</p>
        <p>59, avenue Félix Faure 69003, Lyon.</p>
        <p>Je n'arrive pas a faire afficher le menu d'options.</p>
        <p>
          Après 1 heure, erreur trouvé: la fonction do_settings_sections()
          demande le nom de la page de paramètre pour afficher ses sections,
          l'article que je suivait pour créer cette page de paramètre a utiliser
          le même nom pour la page et la section, j'ai donc ajouté le nom de la
          section a la fonction.
        </p>
        <img
          src="../images/sem3/01-22_04.png"
          alt="une fonction avec une signature mal expliqué"
        />
        <p>
          Si wordpress avait des nom plus intelligents, j'aurai pu deviner plus
          tôt que la fonction qui parle de sections au pluriel n'attend pas le
          nom d'une section et potentiellement d'autre paramètre, mais le nom de
          la page, C'est a dire: la signature que je voyais:
        </p>
        <pre>do_settings_sections(string $section, string[] …)</pre>
        <p>La vrai signature:</p>
        <pre>do_settings_sections(string $page)</pre>
        <p>
          Mais bon, je suis la personne qui a présupposé que tout les noms de
          fonction serait utiles pour connaître la signature attendu.
        </p>
        <p>
          Le début de la page est là mais logiquement, rien ne se sauvegarde car
          pas encore mis en place.
        </p>
      </section>

      <section>
        <time datetime="01-23">23/01/2025</time>
        <p>Ajout de la sauvegarde du formulaire.</p>
        <p>Problème avec la récupération de types de postes.</p>
        <p>
          Trouvé une partie de problème, le code d'ajout de types de postes
          s'exécutait des fois plus tard que l'enregistrement dans les
          paramètres, cela est corrigé en augmentant la priorité de la création
          de type et diminuant celle de la création de paramètres.
        </p>
        <img
          src="../images/sem3/01-23_01.png"
          alt="la fonction paramètre avec sa priorité réduite"
        />
        <p>
          Problème dans l'affichage de la page de paramètres, corrigé en
          transformant la boucle
        </p>
        <pre>
( foreach … as $value ) = = = > ( foreach … as $key => $value )</pre
        >
        <img src="../images/sem3/01-23_02.png" alt="l'affichage buggé" /><img
          src="../images/sem3/01-23_03.png"
          alt="l'affichage fonctionnel"
        />
        <p>
          Les champs se mettent à jour en fonction des valeurs dans la base de
          données.
        </p>
        <img
          src="../images/sem3/01-23_04.png"
          alt="le formulaire avec les champs, l'un des champs checkbox est déjà coché car vrai dans la bdd"
        />Modification
        <img
          src="../images/sem3/01-23_05.png"
          alt="Changement des champs dans la base de données"
        /><img
          src="../images/sem3/01-23_06.png"
          alt="le formulaire, avec les champs mis à jour"
        />
        <p>Il ne manquent plus que la sauvegarde grâce au formulaire.</p>
        <p>Complication avec la mise à jour dynamique des données.</p>
        <p>
          Après facilement 2 heures, j'ai finalement réussi à aplatir la table
          utilisé pour les champs, et oublié de manger a midi.
        </p>
        <p>
          La table récupéré est 2 dimensionel à cause de la fonction utilisé
          pour comparér les valeurs, il faut donc la rendre 1 dimensionel pour
          l'enregistrer correctement dans la base de données.
        </p>
        <img
          src="../images/sem3/01-23_07.png"
          alt="fonction qui met a jour les champs dynamiquement, avec la fonction pour applatir la table"
        />
        <p>
          La mise à jour automatique du formulaire fonctionne! (avant la mise à
          jour ne s'effectuait pas et il était impossible de l'utiliser pour
          détecter des nouvelle types de postes sans casser.)
        </p>
        <p>Le résultat dans le code est moche mais fonctionnel.</p>
        <p>
          Ça me dérange, mais je doit le laisser pour m'occuper de choses plus
          importantes.
        </p>
        <p>
          A cause de la moins que parfaite documentation de wordpress, j'ai
          essayé de mettre en place une vérification de nonce alors que la
          fonction settings fields s'en occupait déjà.
        </p>
        <p>Le code d'activation du plugin ne fonctionne plus, pourquoi?</p>
        <p>
          WordPress, le seul framework qui arrive subitement à se casser sans
          explications.
        </p>
        <pre>do_action('init')</pre>
        <p>S'execute avant</p>
        <pre> register_activation_hook()</pre>
        <p>
          Il était donc impossible d'attacher une fonction au hook init lors de
          l'activation du plugin, car l'activation s'appele après init
          uniquement lors de l'activation.
        </p>
        <pre>new WPSP_Activator = = = > WPSP_Activator::activate()</pre>
      </section>

      <section>
        <time datetime="01-24">24/01/2025</time>
        <p>Télé travail pour préparer le portfolio.</p>
        <p>Script pour la navigation crée, a tester sur le serveur hôte.</p>
        <p>Ça fonctionne!</p>
        <p>
          Complication a utiliser git, après quelque manipulation, finalement
          crée des branches plus propre.
        </p>
        <img src="../images/sem3/01-24_01.png" alt="git source control graph" />
      </section>

      <section>
        <time datetime="01-27">27/01/2025</time>
        <p>
          Correction d'une petite erreur d'affichage dans le formulaire
          d'options.
        </p>
        <p>Difficulté avec la sauvegarde.</p>
        <p>
          Pense avoir trouvé la raison pourquoi la sauvegarde ne fonctionne pas?
        </p>
        <img
          src="../images/sem4/01-27_01.png"
          alt="Signature de register_setting"
        />
        <img
          src="../images/sem4/01-27_02.png"
          alt="Définition de option_name"
        />
        <p>
          Ceci est très literal: Si le nom donnée n'est pas dans la base de
          données, rien ne change.
        </p>
        <p>A nouveau, la documentation wordpress n'a pas été assez précis.</p>
        <p>Maintenant il faut que je fasse que ça fonctionne.</p>
        <p>Réussi a collecter les champs qui sont activé:</p>
        <img
          src="../images/sem4/01-27_03.png"
          alt="image paramètres fonctionnel"
        />
        <img src="../images/sem4/01-27_04.png" alt="sanitize types debug" />
        <p>
          Bon, il est vrai que le code n'utilise pas exactement le
          fonctionnement de register setting (renvoie l'input liée par nom à la
          fonction sanitize défini dans ses paramètres, dans mon cas je récupère
          mes input depuis $_POST directement) mais si ça fonctionne ...
        </p>
        <img src="../images/sem4/01-27_05.png" alt="fonction sanitize type" />
        <p>
          rubber duck debug: Maintenant que j'ai les valeurs activés, je veux
          les convertir en bool vrai puis mettre a jour la table d'options
          associée. Je sais que la table d'option contient une table avec les
          clés en string et valeur en bool: 0 | 1. je pourrais récupérer chaque
          clées de la table et mettre les nouvelles valeurs: si j'ai la clé dans
          mon input, alors l'option associées est vrai, sinon elle est fausse.
        </p>
        <table>
          <tr>
            <td></td>
            <td>Option activé</td>
            <td>Option désactivé</td>
          </tr>
          <tr scope="row">
            <td>Input activé/ présent</td>
            <td>Aucun changement</td>
            <td>Option s'active</td>
          </tr>
          <tr scope="row">
            <td>Input désactivé/ absent</td>
            <td>Option se désactive</td>
            <td>Aucun changement</td>
          </tr>
        </table>
        Transformation en bool fonctionnel
        <img
          src="../images/sem4/01-27_06.png"
          alt="transformation en bool dans fonction sanitize debug"
        />
        <img src="../images/sem4/01-27_07.png" alt="Debug sanitize types" />
        <p>
          (le vide après «[...] =>» dans le second Array est en fait la valeur
          faux, qui n'est pas pris en compte par print_r et donc n'apparaît
          pas.)
        </p>
        <p>
          La sauvegarde de valeur vrai fonctionne mais oublié de codé la
          sauvegarde de valeur fausse. Trompé dans le nom d'une variable oops.
        </p>
        <p>Sauvegarde fonctionne.</p>
        <img
          src="../images/sem4/01-27_08.png"
          alt="Convertissement dans un array de valeur entrée"
        />
        <p>
          En utilisant array_merge, j'écrase les valeurs sauvegardé par celle
          données dans le formulaire.
        </p>
        <p>
          Utilisation de fonctions pour vérifier les valeurs, trouvé les
          fonctions php mb (multi-byte) sur un formulaire stack overflow.
        </p>
        <img
          src="../images/sem4/01-27_09.png"
          alt="Vérification du caractère entrée avec mb_strlen"
        />
        <p>Résultat: tout fonctionne comme prévu.</p>
        <img
          src="../images/sem4/01-27_10.png"
          alt="Image options sauvegardé dans bdd"
        />
        <img
          src="../images/sem4/01-27_11.png"
          alt="Exemple sauvegarde formulaire 1"
        />
        <img
          src="../images/sem4/01-27_12.png"
          alt="Exemple sauvegarde formulaire 2"
        />
        <img
          src="../images/sem4/01-27_13.png"
          alt="Exemple sauvegarde formulaire 3"
        />
      </section>

      <section>
        <time datetime="01-28">28/01/2025</time>
        <p>
          Tentative de création d'un titre pour la section devise afin d'avoir
          une description des limitations de l'entrée (1 caractère)
        </p>
        <p>
          Distrait par création d'une classe pour séparer la gestion des types
          custom a utiliser et le menu de paramètres, sûrement crée une autre
          classe pour la gestion des prix.
        </p>
        <img
          src="../images/sem4/01-28_01.png"
          alt="formulaire de paramètres complet"
        />
        <p>Menu de paramètres finalisé, a demander avis.</p>
        <p>
          Le formulaire se met a jour correctement si les valeurs sont modifié
          directement dans la bdd, je peut donc enlever le code qui me
          perturbait dans ma classe.
        </p>
        <img src="../images/sem4/01-28_02.png" alt="fonction supprimé" />
        <p>Au revoir!</p>
        <p>Je vais séparer la classe des paramètres et la classe des prix.</p>
        <p>
          Le menu n'apparaît pas si l'utilisateur n'a pas le permissions de
          modifier les options, mais je voudrais que les éditeurs puissent
          accéder au prix, je vais donc inverser l'appel (prix crée le menu et
          settings crée un sous-menu).
        </p>
        <p>10 minutes perdu car l'action est attaché au mauvais hook.</p>
        <p>
          Je vais devoir crée ma page de prix manuellement car je ne peux
          utiliser la fonction register_setting (elle enregistre les valeurs
          données dans la table option de la bdd, je veux enregistrer dans la
          table simpleprices)
        </p>
        <p>Je peux ajouter le nonce directement dans le formulaire.</p>
        <p>
          Je pense que je vais essayer de trouver un tuto pour une création de
          formulaire sans l'api settings afin de comprendre comment le faire,
          d'abord chercher un tuto sur web, puis vidéo si je ne trouve pas.
        </p>
        <p>
          trouvé un
          <a href="https://wpshout.com/wordpress-options-page/">tuto / blog</a>
        </p>
        <p>
          Quelque complications: quand j'ouvre la page pour la première fois, le
          nonce n'est pas établie, et donc la page ne s'exécute pas.
        </p>
        <img
          src="../images/sem4/01-28_03.png"
          alt="fonction de nonce qui s'éxécute trop tôt"
        />
        <img
          src="../images/sem4/01-28_04.png"
          alt="exemple d'erreur du nonce, la page est bloqué car le nonce n'est pas vérifié"
        />
        <p>
          Je pense que j'ai l'erreur, je fais le contrôle du nonce dans la
          fonction qui s'occupe de l'affichage de la page, je devrait séparer
          l'affichage et le contrôle, mais comment?
        </p>
        <p>
          Après un peu de recherche, trouvé que c'est bien l'erreur, mais aussi
          que comme la fonction est déclaré par wordpress, le formulaire
          s'exécute avant et la fonction wp_verify_nonce n'est pas encore
          déclaré.
        </p>
        <p>
          J'ai donc ajouté la vérification a une fonction que j'attache a init.
        </p>
        <img
          src="../images/sem4/01-28_05.png"
          alt="ajout d'une action a init"
        />
        <img src="../images/sem4/01-28_06.png" alt="fonction attaché a init" />
        <p>
          Je veux récupérer tout les postes qui contient un type activé, il faut
          donc que je récupère les options du plugin, gardent uniquement les
          types qui ne sont pas 0, puis renvoyer un table des postes qui
          appartient au types.
        </p>
        <p>Le formulaire n'exécute plus la vérification du nonce.</p>
        <p>
          Réussi a corriger le problème d'exécution en créent une action
          wordpress
        </p>
        <img
          src="../images/sem4/01-28_07.png"
          alt="Ajout de la fonction de vérification a mon action"
        />
        <img
          src="../images/sem4/01-28_08.png"
          alt="Appel de l'action quand la soumission du formulaire est vérifié"
        />
        <pre>wp_verify_nonce</pre>
        <p>
          renvoie toujours faux, c'est sûrement moi qui comprends mal comment çà
          marche a nouveau.
        </p>
        <p>
          C'était vrai: verify nonce nécessite la valeur renvoyé par le nonce,
          et non son nom comme je le croyais.
        </p>
        <img
          src="../images/sem4/01-28_09.png"
          alt="code du nonce fonctionnel"
        />
        <p>Fonctionnel maintenant.</p>
        <p>Plus qu'à coder les entrées en elle même.</p>
        <p>L'affichage est là (en partie).</p>
        <img
          src="../images/sem4/01-28_10.png"
          alt="affichage initial formulaire prix"
        />
        <p>
          Après avoir copier l'affichage de la page qui utilise l'api settings
        </p>
        <img
          src="../images/sem4/01-28_11.png"
          alt="code de l'affichage du formulaire"
        />
        <p>C'est bien plus lisible.</p>
        <img
          src="../images/sem4/01-28_12.png"
          alt="Affichage amélioré du formulaire des prix"
        />
        <p>
          Je voudrais faire que 2 post s'affiche dans une seul rangé, il
          suffirait d'insérer le prochain post entre les éléments tr, mais on ne
          peut pas insérer de post qui n'existe pas donc il faut aussi vérifier
          que le post demandé existe bien.
        </p>
        <p>
          Je pense que je vais d'abord travailler sur la sauvegarde puis
          regarder pour les rangés.
        </p>
        <p>
          Donc: Séparation des posts par types > sauvegarde du formulaire >
          affichage 2 postes par rangés.
        </p>
      </section>

      <section>
        <time datetime="01-29">29/01/2025</time>
        <p>Création d'une fonction pour trier les postes par types :</p>
        <img
          src="../images/sem4/01-29_01.png"
          alt="fonction de trie de postes"
        />
        <p>
          Wordpress m'empêche d'avoir une table dans une autre, donc faire des
          affichages par table, même si utile, n'est pas très personnalisable.
        </p>
        <p>Ajout d'une fiche css dans le code principal.</p>
        <img
          src="../images/sem4/01-29_02.png"
          alt="Ajout de fiche de style dans les scripts"
        />
        <p>
          Ne fonctionne pas, et ça ne semble vraiment pas être une erreur de ma
          part, on adore wordpress !
        </p>
        <p>
          Wordpress adore avoir des noms de fonctions pas claire, dans notre
          cas, wp_enqueue…. S'execute uniquement pour les pages publics, il faut
          donc utiliser la version admin du hook ( admin_enqueue….)
        </p>
        <img
          src="../images/sem4/01-29_03.png"
          alt="fonction ajusté pour correspondre au demandes de wordpress"
        />
        <p>Fonctionnel.</p>
        <img
          src="../images/sem4/01-29_04.png"
          alt="démonstration du fonctionnement"
        />
        <p>On peut spécifier la page avec ce hook</p>
        <img src="../images/sem4/01-29_05.png" alt="nouveau hook utilisé" />
        <p>Je déplace donc le script d'activation dans la class WPSP_Prix</p>
        <img
          src="../images/sem4/01-29_06.png"
          alt="code d'ajout de la fiche de style intégré a la classe"
        />
        <p>
          Wordpress n'a pas subitement explosé, car sa fonctionne comme décrit
          sans nuance (pour 1 fois).
        </p>
        <p>Il suffit plus qu'a rajouter la mise en page désirée.</p>
        <p>Je voudrais quelque chose comme çà :</p>
        <table>
          <thead>
            <tr>
              <th rowspan="2">Type</th>
              <th>Label</th>
              <th>Input</th>
            </tr>
            <tr>
              <th>Label</th>
              <th>Input</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th rowspan="2">Type</th>
              <th>Label</th>
              <th>Input</th>
            </tr>
            <tr>
              <th>Label</th>
              <th>Input</th>
            </tr>
          </tbody>
        </table>
        <p>Je pense pouvoir faire quelque chose de similaire avec un foreach</p>
        <p>Après un peu de débrouillardisme, j'ai ces règles css suivantes</p>
        <img src="../images/sem4/01-29_07.png" alt="règles css crée" />
        <p>Qui donne cette affichage :</p>
        <img
          src="../images/sem4/01-29_08.png"
          alt="Affichage de la page de prix après l'application du css"
        />
        <p>
          Il faut maintenant récupérer les prix pour les sauvegarder dans la
          base de données.
        </p>
        <p>J'ai récupérer les valeurs, plus qu'à les traiter.</p>
        <p>
          Je ne garde pas les valeurs nul ou qui ne seront pas sauvegardé dans
          la base de données.
        </p>
        <img
          src="../images/sem4/01-29_09.png"
          alt="Script de sanitisation des valeurs"
        />
        <p>Je convertit aussi les valeurs en double.</p>
        <img
          src="../images/sem4/01-29_10.png"
          alt="fonction de sauvegarde des données dans ma bdd"
        />
        <p>Sauvegarde des données.</p>
        <img
          src="../images/sem4/01-29_11.png"
          alt="entrée de données dans le formulaire"
        />
        <img
          src="../images/sem4/01-29_12.png"
          alt="les données sont sauvegardé dans la bdd"
        />
        <p>Plus qu'a mettre automatiquement les valeurs dans le formulaire.</p>
        <p>Suffit de récupérer les prix en fonctions de l'id du post.</p>
        <p>
          Je vais enregistrer ma table custom dans la classe WPSP Admin qui
          s'occupe de la communication entre le site et la bdd pour mon plugin,
          puis créer une fonction qui accepte une id et retourne une valeur (le
          prix déjà assigné).
        </p>
      </section>

      <section>
        <time datetime="01-30">30/01/2025</time>
        <p>Découverte de la fonction array_column grâce a stack overflow</p>
        <p>Elle permet de grandement simplifier ma table.</p>
        <p>Avant :</p>
        <img
          src="../images/sem4/01-30_01.png"
          alt="Table avant utilisation de array column"
        />
        <p>Après :</p>
        <img
          src="../images/sem4/01-30_02.png"
          alt="Table après utilisation de array column"
        />
        <p>
          Ajout d 'un message d 'avertissement si la sauvegarde échoue quelque
          part
        </p>
        <img src="../images/sem4/01-30_03.png" alt="Ajout test de sauvegarde" />
        <p>$success est déclare vrai plus haut dans la fonction (save_prix).</p>
        <p>Message de succès ou avertissement</p>
        <img
          src="../images/sem4/01-30_04.png"
          alt="Fonction message d'avertissement"
        />
        <p>Ce qui donne :</p>
        <img src="../images/sem4/01-30_05.png" alt="Message d'avertissement" />
        <p>L 'affichage d 'erreur sera compliqué a tester.</p>
        <p>
          Une recherche dans le
          <a href="https://developer.wordpress.org/plugins/shortcodes/"
            >plugin handbook</a
          >
          pour comment créer des shortcode.
        </p>
        <p>Affichage par types / categorie des prixs.</p>
        <p>Tentative de shortcode :</p>
        <img src="../images/sem4/01-30_06.png" alt="Shortcode initial" />
        <p>
          Complication avec les namespace (je savais que ça allez revenir pour m
          'agacer).
        </p>
        <p>
          Le mot public est réservé, donc impossible d 'avoir un namespace
          appelé public (ou bien finir en public), en changeant le namespace,
          tout fonctionne.
        </p>
        <p>
          Les patterns que j 'ai crée renvoie une “erreur”, un autre défaillance
          de wordpress car je n 'ai pas suivi leur 15 livres pour créer un bloc
          spécifique pour un pattern spécifique pour 1 seul utilisation.
        </p>
        <p>Après 1 heure, finalement réussi a “Corriger” mon “erreur”</p>
        <p>
          Une solution a été trouvé : Il faut coder en dur le contenu pour ne
          pas avoir “erreur” dans le coté admin (tout les erreurs sont
          uniquement en admin.), le problème étant qu 'on ne peut pas modifier l
          'affichage.
        </p>
        <p>GitHub est hors service (15h33).</p>
        <p>
          Après une heure, plusieurs forum stack overflow, j 'ai réussi a
          enlever tout les erreurs dans le menu d 'editeur, plus qu 'à repeter
          pour l 'autre pattern.
        </p>
        <p>
          Plus d 'affichage « block content is invalid or unexpected » dans l
          'editeur admin
        </p>
        <p>🥳🥳🥳</p>
        <img src="../images/sem4/01-30_07.png" alt="Affichage admin correct" />
        <p>Merci, developer console</p>
        <p>Je peut maintenant continuer ce que je faisait, les shortcodes.</p>
        <p>Shortcode de test fonctionne.</p>
        <img src="../images/sem4/01-30_08.png" alt="Shortcode marche" />
        <p>
          Le shortcode n 'a pas de style spécifique… A voir pour la mise en page
          demain.
        </p>
        <p>
          Après lecture dans le handbook, création d 'un enclosing shortcode
          (shortcode qui manipule les données a l 'intérieur).
        </p>
        <p>Je vais faire que le contenu a l 'intérieur soit aqua blue.</p>
        <p>Juste pour debug.</p>
        <img
          src="../images/sem4/01-30_09.png"
          alt="Le shortcode est maintenant enclosing"
        />
        <p>Fonctionne</p>
        <img
          src="../images/sem4/01-30_10.png"
          alt="Shortcode manipule les données qu'il enclose"
        />
        <p>
          Il faudrait que je commence a penser comment tout mettre en place mais
          je suis déjà mentalement épuisé ?
        </p>
        <p>J 'ai envie de m 'endormir.</p>
        <p>
          Je pense que je récupère tout les valeurs de ma table et crée un
          affichage avec.
        </p>
        <p>
          Je pense qu 'il serait aussi intelligent d 'ajouter le type de post a
          ma table afin de pouvoir déterminer les données à récuperer en une
          seule requette
        </p>
        <pre>select * from ma_table where post_type = post_desirée</pre>
        <p>
          Ou bien tout simplement faire une jointure (surement plus simple et
          évite de créer des doublets)
        </p>
        <p>
          J 'ajouterai un trigger sur la table post pour supprimer un prix quand
          un post est supprimé.
        </p>
      </section>

      <section>
        <time datetime="01-31">31/01/2025</time>
        <p>Test de trigger. Pas les droits</p>
        <p>
          Après un recherche rapide, il semble que l'ajout de trigger ne soit
          pas garantie dans l'environnement, au lieu de tester, je vais
          simplement crée une fonction qui se lance a chaque fois que la page de
          prix est ouvert et qui supprime une valeur si l'id associée n'existe
          plus dans la table posts
        </p>
        <pre>
          $mesprix
          pour chaque $prix de $mesprix
          si ..._Posts.ID n'existe pas
          Supprimer $prix de ..._MaTable.
        </pre>
        <p>Création de la fonction.</p>
        <img
          src="../images/sem4/01-31_01.png"
          alt="Fonction pour enlever les prix qui n'ont plus de post associée"
        />
        <p>Utilise deux nouvelle fonctions dans WPSP_Admin.</p>
        <img
          src="../images/sem4/01-31_02.png"
          alt="Fonction qui obtient tout les types postes associées au plugin (post ou autre type custom)"
        />
        <p>Et</p>
        <img
          src="../images/sem4/01-31_03.png"
          alt="fonction qui supprime des valeurs dans la base de données"
        />
        <p>Retour a la création de shortcode.</p>
        <p>
          Je vais d'abord m'occuper de l'affichage avec des valeurs codé en dur
          puis je m'occuperai de l'importation des données, raison : je n'ai pas
          envie d'y réfléchir pour le moment.
        </p>
        <p>
          Crée une table, mais sûrement pas ce qui était attendu, je demanderai
          a Ludivine.
        </p>
        <img
          src="../images/sem4/01-31_04.png"
          alt="Table d'affichage du shortcode"
        />
        <p>
          Récupération des valeurs réussi, la création de la table manquent.
        </p>
        <p>Prototype :</p>
        <img src="../images/sem4/01-31_05.png" alt="Prototype du shortcode" />
        <p>
          Possiblement faire une colonne par catégorie et crée des catégories
          spécial pour le thème.
        </p>
        <p>
          Cherche comment ajouter un formulaire sur l'éditeur pour l'ajout de
          catégorie, comme celui déjà en place pour post.
        </p>
        <img
          src="../images/sem4/01-31_06.png"
          alt="Affichage de base pour les catégories dans les posts wordpress"
        />
        <p>
          Je n'arrive pas a trouver comment le faire, tout les ressources qui
          ressort dans les premiers sur l'engin de recherche dit de créer et
          assigner les catégorie a travers le panneau admin, et il me semble que
          personne explique comment le faire pour les types custom.
        </p>
        <p>
          Je pourrais supprimer des lignes du code de création de catégorie
          jusqu'à par élimination trouvé celles qui est utilisé pour faire
          l'affichage.
        </p>
        <p>
          Vraiment trop compliqué a trouver et je n'ai pas du temps illimité a
          perdre.
        </p>
        <p>Donc, création et test de catégorie grâce a l'affichage maître.</p>
      </section>

      <section>
        <time datetime="02-03">03/02/2025</time>
        <p>
          Modification de la query pour récupérer les catégories associées au
          posts avec un prix sauvegardé, il serait peut être plus simple de
          faire une autre query ?
        </p>
        <p>
          Après m'être rappeler de fonctions php, création d'une table qui
          contient les catégories (terms) des posts qui ont un prix, sans
          duplication.
        </p>
        <img
          src="../images/sem5/02-03_01.png"
          alt="script qui génére une table avec la colonne name de la query"
        />
        <p>
          Je récupére la colonne name de la table de posts, puis supprime tout
          les dupliqué.
        </p>
        <p>Le print de débug affiche que le résultat est bien celui attendu.</p>
        <img src="../images/sem5/02-03_02.png" alt="print de débug" />
        <p>La table a 2 valeurs, « » (ou NULL) et « Boissons chaudes »</p>
        <p>
          Comme les terms sont ordonnées par nom dans la query, on sait aussi
          que
        </p>
        <ul>
          <li>3 posts ont aucun terms (ie, aucune catégories)</li>
          <li>Au moins 1 post a la catégorie boissons chaudes</li>
        </ul>
        <p>
          Si on ajoutait une valeur de test dans la table avant de supprimer les
          doublons, on pourrait aussi déterminer le nombre de posts qui ont la
          catégorie boissons chaudes (ou bien la dernière catégorie récupérer
          par la query)
        </p>
        <p>En rajoutant un valeur non null, comme un espace, on obtient :</p>
        <img src="../images/sem5/02-03_03.png" alt="print de débug" />
        <p>
          On sait donc que la catégorie Boissons chaudes est assigné a 3 posts
          car 6 - 3 = 3
        </p>
        <p>A quoi tout cela sert ?</p>
        <p>Aucune idée.</p>
        <p>
          Après plus de réflexion et moins de code inutile, rappelé de la
          fonction principal de array_column, qui permet de récupérer des
          valeurs d'une table est les assigner a un autre table, tout en
          choisissant quelle valeurs utilisé pour l'index.
        </p>
        <p>
          Ainsi j'ai maintenant
          <img
            src="../images/sem5/02-03_04.png"
            alt="print de débug, une table avec les différents terms et id de posts y sont contenu"
          />
        </p>
        <p>Ce qui est bien plus facile a utiliser mais on peut faire mieux</p>
        <img
          src="../images/sem5/02-03_05.png"
          alt="print de débug, la table est maintenant associative avec les terms  comme clées"
        />
        <p>
          Et voila, ceci est bien plus utile car on peut itérer chaque term avec
          un foreach puis chaque post par un for i
        </p>
        <p>
          Une application concret de cela serait de créer un table d'affichage
          qui crée une entête pour chaque section puis les peupler avec les
          postes qui ont le même term que l'entête de la section.
        </p>
        <p>
          Un petit conflit que j'ai trouvé intéressant a noté dans ce journal de
          bord :
        </p>
        <p>
          les variables utilisé pour les foreach sont assigné sur tout
          l'échelle, donc utiliser le nom d'une variable déjà utilisé supprime
          ça valeur, on peut facilement éviter çà en changeant le nom de la
          variable.
        </p>
        <img src="../images/sem5/02-03_06.png" alt="petit bug intéressant 1" />
        <p>
          $posts est déjà assigné plus haut dans le code, donc mon code plus bas
          ne fonctionne pas comme prévu
        </p>
        <img src="../images/sem5/02-03_07.png" alt="petit bug intéressant 2" />
        <p>
          Car il va maintenant itérer sur les valeurs récupérer dans la boucle
          précédentes.
        </p>
        <p>Bloqué, je vais écrire pour laisser mon cerveaux reflechir.</p>
        <p>
          Mon problème : Je voudrais ajouter mes valeurs dans le tableau en
          fonction de la catégorie mais je n'ai que l'id des posts dans ma table
          de catégorie, récuperer les valeurs des posts ne devrait pas être trop
          compliqué mais la manière dont je veut le faire, je n'en suis pas sur.
        </p>
        <p>
          Je pourrais faire un array merge, cela m'a l'air le plus simple mais
          nécessiterait d'itérer sur les 2 tables, ce qui pourrait être plus
          lent que nécessaire ?
        </p>
        <p>
          Il ne serait aussi pas utile d'avoir la table de posts si je garde
          toutes les informations dans la table de catégories.
        </p>
        <p>
          Après reflexion, je pense pouvoir utilisé les clées de la table de
          term pour faire une logique, par exemple, je mets un valeur = a une
          des clées, puis quand je peuple ma table (&lt;table&gt; html) je
          verifie si la valeur vaut une valeur spécifique, et si c'est le cas
          alors je fais quelque chose spécifique.
        </p>
        <p>
          Le pointeur d'une table peut être modifier par la fonction next, mais
          n'est pas automatiquement appelé lors d'une boucle, après cette
          réalisation, correction du code d'affichage.
        </p>
        <img
          src="../images/sem5/02-03_08.png"
          alt="script d'affichage par ligne de 2 postes"
        />
        <p>
          L'affichage par catégorie n'est pas encore codé mais la variable
          last_of_row devrait être simple a réutiliser une fois qu'une logique
          me vient.
        </p>
        <p>
          Il faudrait aussi que je prévois une page pour la modification de la
          mise en page de la fiche par défaut, et donc un récupération et mise
          en place des options sauvegardé.
        </p>
        <p>
          Décidé de créer une fonction appart pour générer une table utilisable
          plus tard.
        </p>
        <img
          src="../images/sem5/02-03_09.png"
          alt="print de débug, la table associative contient maintenat les termes et les postes"
        />
        <p>
          La génération de cette table ne requiert uniquement la table de posts.
        </p>
        <p>
          Je n'ai aussi plus besoin de la fonction array column car je peut
          juste utiliser array keys sur cette table.
        </p>
        <img
          src="../images/sem5/02-03_10.png"
          alt="script, récupération des termes dans la variable terms"
        />
        <p>
          L'affichage est presque complet, seul problème, les td ne s'affichent
          pas comme espéré ?
        </p>
        <p>
          Il se chevauche verticalement au lieu de horizontalement, trouvé assez
          rapidement que l'erreur vient de classe que j'ai rajoute
          (nested-table), car en mettant le display du td en table, l'affichage
          se brisait.
        </p>
        <p>J'enlève donc la classe.</p>
        <p>
          L'affichage n'est pas du plus beau mais il fonctionne plus comme prévu
          initialement.
        </p>
        <img
          src="../images/sem5/02-03_11.png"
          alt="Affichage basique du shortcode"
        />
        <p>(Décaféiné, Cappuccino et Moccacino n'ont pas de catégories).</p>
      </section>

      <section>
        <time datetime="02-04">04/02/2025</time>
        <p>
          La requête n'est pas très lent depuis phpmyadmin mais pourrais
          ralentir dans le site officiel?
        </p>
        <p>
          Une idée pour la table serait d'avoir qu'une seule colonne, et un
          header a chaque catégorie.
        </p>
        <p>Je vais centrer le tableau, puis mettre en place la colonne.</p>
        <p>
          Comme on va faire apparaître chaque catégories une après l'autre, on
          peut supprimer la table qui contient les catégories et uniquement
          utiliser la table associative de catégories au posts, la table de
          posts est aussi peu utile car nous avons des doublons donc on peut
          aussi l'enlever.
        </p>
        <p>
          Bye bye !
          <img src="../images/sem5/02-04_01.png" alt="Code supprimé" />
        </p>
        <p>Maintenant plus qu'à adapter la boucle.</p>
        <p>La boucle est fini, l'affichage est a compléter.</p>
        <img
          src="../images/sem5/02-04_02.png"
          alt="Code de la boucle de l'affichage"
        />
        <p>
          La table affiché est 1 seule colonne mais la section des données est
          centré, je la voudrais sur la gauche.
        </p>
        <p>Réussi a mettre l'affichage comme je le désire.</p>
        <img
          src="../images/sem5/02-04_03.png"
          alt="Affichage du tableau avec categorie"
        />
        <p>Tente de réussir a utiliser le menu de catégorie wp a nouveau.</p>
        <p>
          Après proche de 1 heure, peut être 1h 30, trouvé la solution grâce a
          un forum qui souffre d'un problème similaire.
        </p>
        <p>Le problème ?</p>
        <p>
          Dans la création de la taxonomy/catégorie, l'argument show_in_rest a
          une valeur qui ne dépend pas de public.
        </p>
        <p>
          En ajoutant show_in_rest => true la catégorie (et les sous-catégories)
          s'affichent.
        </p>
        <img
          src="../images/sem5/02-04_04.png"
          alt="Les catégories fonctionne"
        />
        <p>Je vais me tirer une balle</p>
        <p>
          J'ai un bon tableau d'exemple, je pense retoucher le tableau pour la
          liste des prix pour obtenir un affichage similaire.
        </p>
        <p>
          On peut choisir plusieurs catégories, je vais supposé que Ludivine et
          gaelle ne vont pas faire ce choix
        </p>
        <p>Création d'un script pour l'affichage de la page de prix.</p>
        <p>
          J'ai changé des fonctions, mais je ne me rappelle plus exactement ce
          que j'ai changé.
        </p>
        <p>
          On a éventuellement
          <img
            src="../images/sem5/02-04_05.png"
            alt="Affichage page de prix avec catégories"
          />
        </p>
        <p>
          Qui je pense est très élégant, et au moins risque de peu confondre les
          utilisateurs du plugin.
        </p>
        <p>
          Après un test rapide, remarqué que les posts sans catégories apparaît
          un peu bizarre (ils ont le même entête que les autres, mais leur
          entête est vide), rajout d'un contrôle qui ajoute l'entête « sans
          catégorie »
        </p>
        <img src="../images/sem5/02-04_06.png" alt="Test post sans catégorie" />
        <img
          src="../images/sem5/02-04_07.png"
          alt="la page de prix l'affiche correctement"
        />
        <p>
          En ajoutant des posts pour tester l'affichage, découvert que les
          postes sans prix apparaît aussi.
        </p>
        <img
          src="../images/sem5/02-04_08.png"
          alt="Affichage incorrecte quand prix manquant"
        />
        <p>
          Réussi rapidement a empêcher l'affichage si la valeur est null mais ça
          ne remplace pas le problème que des données null sont récupéré et
          envoyé.
        </p>
        <p>
          Création d'une nouvelle fonction aide, la table ne reçoit plus de
          valeur avec aucun prix
        </p>
        <img
          src="../images/sem5/02-04_09.png"
          alt="Fonction d'aide pour catégories et postes"
        />
        <p>
          Perdu sur ce que je peut faire, vais prendre un pause pour me reposer
          un peu.
        </p>
        <p>
          Apprentissage de Ajax pour permettre d'épandre ou non le menu de prix.
        </p>
        <p>
          Réussi a ajouter du jQuery, mais la méthode que je désire utiliser
          (toggleSlide) ne s'applique pas correctement a mes éléments :
          L'élément disparaît soudainement au lieu de d'abord rétrécir.
        </p>
      </section>

      <section>
        <time datetime="02-05">05/02/2025</time>
        <p>
          Pour faire fonctionner l'effet sur le tableau, il faut appliquer
          l'événement a tout ces enfants, plus précisément ceux qui contient des
          valeurs comme td et th.
        </p>
        <p>On peut également ajouter un effet a la table pour plus de style.</p>
        <img
          src="../images/sem5/02-05_01.png"
          alt="Code jQuery pour l'effet de la table"
        />
        <p>
          Ici je supprime aussi un élément p, il est automatiquement ajouté par
          wordpress en mon bouton et ma table.
        </p>
        <p>
          Dans le tableau d'affichage, les prix sans catégories apparaissent
          dans leur propre section, mais rien n'apparaît pour le signifier,
          ajout d'un barreau pour améliorer la compréhension.
        </p>
        <img
          src="../images/sem5/02-05_02.png"
          alt="Affichage de la table, un barreau apparait pour delimiter entre une catégorie"
        />
        <p>
          Création d'un nouveau post de type différents pour tester l'affichage
          avec plusieurs types de postes.
        </p>
        <p>Sauvegarde du prix dans la bdd ne s'exécute pas.</p>
        <p>La sauvegarde s'exécute bien mais le prix est ensuite supprimé.</p>
        <p>
          Après avoir touché quelque ligne de code pour debug, subitement mis a
          remarcher correctement.
        </p>
        <p>
          Ajout d'un test pour supprimer le barreau si l'élément est le premier
          dans le menu, et ajout d'un nom par défaut au shortcode.
        </p>
        <img src="../images/sem5/02-05_03.png" alt="Code du test" />
        <p>Lors de l'ouverture ou fermeture du menu, il saute à la fin.</p>
        <p>
          Contournement trouvé sur stackOverflow: on enregistre la taille de
          l'éléments qui va servir de menu puis le cache au début de la page,
          les effets restore toujours les propriétés de l'élément, donc la
          taille sera réstoré quand le menu est ouvert
        </p>
        <p>Tout cela permet de grandement réduire l'effet de «saut».</p>
        <img
          src="../images/sem5/02-05_04.png"
          alt="Code de contournement du problème"
        />
        <p>Vu avec Ludivine, si possible faire 2 colonne pour le menu.</p>
        <p>
          Voir comment mettre en place des paramètres de shortcode pour
          permettre la modification?
        </p>
        <p>
          D'abord faire les 2 colonnes, sinon juste continuer sur une autre
          tâche.
        </p>
        <p>
          Crée les 2 colonnes, voir pour créer plus de paramètres de shortcode.
        </p>
        <p>
          En train d'essayer de mettre en place une modification au DOM si le
          media (l'écran qui ouvre le document) est trop fin, afin d'avoir
          qu'une seul colonne.
        </p>
        <p>
          Complication car inexpérimenté avec la manipulation de DOM et
          JavaScript
        </p>
      </section>

      <section>
        <time datetime="02-06">06/02/2025</time>
        <p>
          Continuer a travailler sur l'affichage du tableau si le media est trop
          petit, si pas fini avant 11h travailler sur autre chose.
        </p>
        <p>Ventilateur souffle fort au démarrage, a regarder plus tard.</p>
        <p>Réussi a mettre en place l'affichage pour téléphone.</p>
        <img
          src="../images/sem5/02-06_01.png"
          alt="Affichage du tableau dans un petit écran"
        />
        <p>
          Pour tout média en dessous de 681 pixel, la liste / le menu de prix
          passe de 2 colonne a 1 colonne.
        </p>
        <p>Que faire maintenant?</p>
        <p>
          Règle css ajouté pour améliorer l'affichage de la liste dans petit
          écrans.
        </p>
        <img
          src="../images/sem5/02-06_02.png"
          alt="règle css ajouté pour l'affichage"
        />
        <p>Rajouter coordonnées artimbale au footer.</p>
        <p>
          Lecture du
          <a href="https://datatracker.ietf.org/doc/html/rfc3966">RFC 3966</a>
          par curiosité.
        </p>
        <p>
          Pas compris la moitié du truc mais c'est aussi pas mal intéressant.
        </p>
        <p>Le ventilateur au démarrage est vraiment fort.</p>
        <p>
          Je vais intégrer un plugin pour ajouter une carte dans l'affichage, le
          plugin
          <a href="https://wordpress.org/plugins/map-block-leaflet/">
            Map Block Leaflet
          </a>
          crée un bloque a utiliser pour créer une carte utilisant la
          bibliothèque open source
          <a href="https://leafletjs.com/"> Leaflet </a>
        </p>
        <p>
          Après une exploration rapide car quelque chose ce passe sur l'éditeur
          de page saute quand j'arrive en bas, le premier suspect, le shortcode,
          n'est pas le coupable.
        </p>
        <p>
          Le bloque ajouté par map block est un peu ennuyant a utiliser: le
          curseur ne perd jamais le focus quand relâché, envoyé mail au créateur
          avec détails de mon environnement pour l'informer.
        </p>
        <p>Bus-mètro-tram: lignes a rajouter sur la carte</p>
        <p>
          Peut être devoir implementer leaflet manuellement si je n'arrive pas a
          ajouter la carte que je désire sur le plugin.
        </p>
      </section>

      <section>
        <time datetime="02-07">07/02/2025</time>
        <p>
          Je pense demander ma tutrice de faire un compte google clouds pour
          avoir un clé map, il me semble si j'ai bien compris que google clouds
          offre un crédit de 200 $ chaque mois pour utilisation de l'api google
          maps
        </p>
        <p>
          Trouvé un plugin, Static Maps Editor, qui permet de créer une carte
          statique, je vais en faire une basique (arret et ligne de mètro,
          Artimbale) et demander si cela convient.
        </p>
        <p>
          Çà convient, il faut ajouter manuellement les arrêts de transport en
          commun sinon la carte est trop remplie d'information.
        </p>
        <p>Oublié de prendre des captures d'écran pendant la création.</p>
        <p>
          Résultat final:
          <img
            src="../images/sem5/02-07_01.png"
            alt="Carte des environs de la boutique, les lignes de tram et métro sont visible"
          />
        </p>
        <p>
          Un agenda est désirée pour mettre les événements prévu, Ils sont posté
          sur Instagram.
        </p>
        <p>
          Après lecture de l'API d'Instagram, il semble impossible de récupérer
          le post grâce a l'Api mis en place, car l'Api désigné pour les
          utilisateurs est devenu obsolète (Méta ont fait le choix d'arrêter le
          support).
        </p>
        <p>
          Il serait peut être possible de récupérer les données avec un autre
          API, mais la recherche de cet API, l'installation et la programmation
          pourrais prendre trop de temps et m'empêcher de finir le site dans les
          temps du stage.
        </p>
      </section>

      <section>
        <time datetime="02-10">10/02/2025</time>
        <p>Travail sur le rapport de stage.</p>
      </section>

      <section>
        <time datetime="02-11">11/02/2025</time>
        <p>Continue travail sur le rapport de stage.</p>
        <p>
          A faire : Ajouter une vérification pour désactiver l'affichage de la
          fiche de prix si le type de post est désactivé.
        </p>
        <p>
          Ajouté agenda en tant que PDF, l'affichage n'est pas uniforme entre
          les navigateurs et ne s'affiche pas forcement sur les navigateurs
          téléphone.
        </p>
        <p>
          Solution : Afficher une image et insérer le ficher en dessous sans
          affichage
        </p>
        <p>
          Ajout de l'image de l'agenda et son fichier dans le pattern agenda.
        </p>
        <img src="../images/sem6/02-11_01.png" alt="Code du pattern agenda" />
        <p>
          Problèmes avec images dans le tourniquet : Si l'écran est trop petit,
          l'image dépasse au dessous. <img src="../images/sem6/02-11_02.png" alt="erreur d'affichage du tourniquet" />
        </p>
      </section>

      <section>
        <time datetime="02-12">11/02/2025</time>
        <p>On peut corriger le dépassement avec la règle css overflow:clip.</p>
        <p>
          Le problème maintenant est que l'image touche le bord de l'élément
          conteneur.
        </p>
        <img src="../images/sem6/02-12_01.png" alt="Erreur d'affichage corrigé" />
        <p>
          C'est un problème car des images plus petites pourrais ne pas toucher
          le bord et donc la mise en page serait différent.
        </p>
        <p>
          Je pense que je vais enlever le bord et l'arrière plan, car ils
          servait surtout a avoir une idée de la place de l'image.
        </p>
        <p>
          Après quelque manipulation, je pense que je veux qu'une seul image (et
          donc post) soit visible pour affichage de téléphone.
        </p>
        <p>
          J'ajoute un taille minimum pour limiter l'affichage a 1 post pour les
          écrans plus fin.
        </p>
        <p>
          Problème, quand l'index est sauvegardé, l'affichage devient fixe : les
          tourniquet ne se mettent plus à jour, on peut simplement rajouter le
          pattern a nouveau mais cela est ennuyant et il est fort probable qu'un
          oublie s'effectue éventuellement.
        </p>
        <p>
          Je vais essayer d'utiliser template_redirect, hook qui se lance avant
          l'affichage de la page.
        </p>
        <p>
          Les tests me montre que cela s'affiche avant tout le contenu, donc il
          faudrait dupliquer le contenu et mettre a jour ce qu'on veux, je ne
          pense pas que cela sera utilisable
        </p>
        <p>
          Il faut que je choisis entre essayer d'utiliser le query loop bloque a
          nouveau ou créer un shortcode.
        </p>
        <p>
          J'arrive déjà a utiliser un shortcode, il serait assez simple a créer,
          je vais donc le faire pour avoir une option de secours puis essayera a
          utiliser le query loop.
        </p>
        <p>
          Après quelque complications, réussi a recréer un shortcode, il faut
          sauvegarder une modification de la mise en page pour que l'affichage
          apparaît sinon seulement le contenu du shortcode apparaît (pour je ne
          sais quelle raison)
        </p>
        <p>fait de même avec le shortcode du plugin.</p>
        <img src="../images/sem6/02-12_02.png" alt="Shortcode du carousel dans l'éditeur" />
        <p>
          Avant j'utilisais do_shortcode, qui avait l'effet secondaire de mettre
          le contenu du shortcode dans la page editeur, donc quand un sauvegarde
          est fait on perd la mise à jour automatique car la sauvegarde a des
          valeurs fixe, a lieu qu'un lien/pointeur vers le shortcode.
        </p>
        <p>
          Il faudrait maintenant ajouter un écran pour modifier l'affichage. A
          réfléchir.
        </p>
        <p>J'ajoute un sous-menu dans apparence.</p>
        <img src="../images/sem6/02-12_03.png" alt="Sous menu dans le menu apparence" />
        <p>
          Ensuite plus qu'à ajouter un affichage pour démontrer ce que les
          options changent et une demo sur la page
        </p>
        <p>
          J'ai l'affichage de la démo, il faut que j'arrive a mettre a jour le
          style css des éléments dynamiquement
        </p>
        <img src="../images/sem6/02-12_04.png" alt="formulaire de changement de style initiale" />
        <p>
          Quelle information pourrait être intéressant a modifier pour mes
          utilisateurs ?
        </p>
        <p>
          couleur arrière plan, couleur texte, police, espace entre posts… çà
          l'air plus compliqué que je pensais, demander ce qui est vraiment
          important de pouvoir sauvegarder.
        </p>
        <p>
          Tente de trouver comment lire un fichier sur WordPress mais j'ai
          plusieurs complications.
        </p>
        <p>
          Créer un délimiteur dans le fichier CSS, car le lecteur de fichier
          comprend les commentaires.
        </p>
        <p>A regarder pour la manipulation du fichier.</p>
      </section>

      <section>
        <time datetime="02-13">13/02/2025</time>
        <p>Mal dormi, loupé le réveil.</p>
        <p>
          Découverte de l'attribut contenteditable pour HTML, Ce qui va
          grandement simplifier mon formulaire pour la mise en page des
          tourniquets.
        </p>
        <p>
          J'ai une base pour le formulaire, je voudrais mettre en place la
          sauvegarde maintenant.
        </p>
        <img src="../images/sem6/02-13_01.png" alt="formulaire de changement de style simple" />
        <p>En train de voir avec Ludivine pour des modifications de la page,</p>
        <p>Changement de l'ordre de certaines sections.</p>
        <p>A faire : Tuto pour comment utiliser le site et le plugin.</p>
        <p>
          Début de la confirmation pour le formulaire : J'arrive a récupérer le
          texte modifié dans le post
        </p>
        <p>
          Découverte de plusieurs fonction et concept javascript comme les
          events et les selections.
        </p>
        <p>
          problème pour l'outil de style : Quand j'appuie sur entrée, il n'y a
          pas d'insertion de nouvelle ligne, je doit donc coder manuellement la
          fonctionalité.
        </p>
        <p>Grâce a javascript et jQuery, on à :</p>
        <img src="../images/sem6/02-13_02.png" alt="Script jQuery" />
        <p>
          Cette fonction vérifie si l'élément est sélectionné, la sélection est
          nécessaire pour modifier le contenu de l'élément donc il n'y a pas de
          risque que le script se lance accidentellement.
        </p>
        <p>
          Ensuite, il vérifie si la touche appuyé est la touche « entré », et si
          c'est le cas, l'empêche d'effectuer ces comportements de défauts sur
          cet element (dans notre cas, une nouvelle ligne est ajouté avant
          l'élément, ce qui le pousse vers le bas), pour finir, on ajoute un
          caractère de nouvelle ligne « \n » a la position du caret (curseur),
          puis augment la position du curseur de 1 pour le mettre sur la
          nouvelle ligne crée.
        </p>
        <p>
          Formater le CSS quand il est sauvegardé peut être intéressant, mais il
          faut d'abord que j'ajoute la sauvegarde.
        </p>
        <p>
          Après-midi : Ludivine m'a fait regarder le logiciel de caisse, je n'ai
          pas eu un bon récapitulatif du problème.
        </p>
        <p>Leoges nf monosite</p>
        <p>
          Problème : Désire de créer un numéro de table pour simplifier la
          restauration, mais ne sait pas utiliser l'application, et quand on
          supprime un article d'une commande déjà passé (a l'encaissement par
          exemple), il est sauvegardé sur le ticket comme ajouté puis supprimé,
          mais désire d'avoir uniquement les articles sauvegardé sur le ticket
        </p>
        <p>
          Regardé le site de leoges nf, mais il est presque exclusivement
          composé de vidéo tutoriel et formulaire pour déterminer quelle version
          de la licence serait la plus avantageuse.
        </p>
        <p>Aucune guide écrit.</p>
        <p>
          2 options disponible : appeler le support téléphone pour demander une
          ressource écrit, d'après le témoignage de Ludivine et Gaëlle, le
          support est incompétent, ou du moins, ne savent pas naviguer
          l'application, l'autre option est de tester les options, seul problème
          étant que je ne sais pas comment activer un mode de test dans
          l'application, ou s'il en existe un pour commencer.
        </p>
        <p>
          Hors du gros problème de support technique et du manque du tutoriel
          papier (ou lisible), le logiciel a l'air très bien.
        </p>
      </section>

      <section>
        <time datetime="02-14">14/02/2025</time>
        <p>Regarde les tutos vidéo du logicel.</p>
        <p>
          Trouvé comment créer des plans de tables, démonstration rapide avec
          Gaëlle, mais incomplet, a finir.
        </p>
        <p>
          On peut créer un plan de table spécial avec les tables qu'on désire.
        </p>
        <p>
          Le logiciel et le type de fichier préféré est sweet home 3d (et
          .sh3d).
        </p>
        <p>
          J'installe et j'essaie de créer une maquette pour la création du plan.
        </p>
        <img src="../images/sem6/02-14_01.png" alt="Maquette de la mezannine, fait sur sweet home 3d" />
        <p>Loin d'être parfait mais suffisant pour commencer.</p>
        <p>
          Dépanné l'imprimante avec ij network device setup utility, il fallait
          connecter l'imprimante par câble pour corriger ses paramètres de
          connexion.
        </p>
        <p>
          Il a fallu aussi installer une autre application sur l'ordinateur de
          Ludivine pour installer et mettre à jour les drivers.
        </p>
        <p>
          Pour les règles CSS, il serait intéressant de les mètres dans le
          presse-papier (et de imprimer sur l'écran pour permettre la copie
          manuel.
        </p>
        <p>Message de succès, plus qu'a coder la sauvegarde.</p>
      </section>

      <section>
        <p>
          Après réflexion, ça va être sûrement dur pour Ludivine ou Gaëlle de
          modifier les règles css, car elle n'ont pas / peu d'expérience avec,
          et je ne pense pas pouvoir couvrir tout les demandes avec « l'outil »,
          qui est juste un éditeur de texte très simple, j'enlève donc l'outil.
        </p>
        <p>
          Changement des permissions des fichiers, j'ai des erreurs, vitement
          corrigé grâce a un
          <a href="https://www.malcare.com/blog/wordpress-file-permissions/"
            >blog</a
          >, tout fonctionne correctement.
        </p>
        <p>Changement rapide de quelques reglès de style.</p>
        <p>
          Création d'un tutoriel pour l'utilisation générale de wordPress et du
          thème / plugin que j'ai crée sous rêquette de Ludivine.
        </p>
      </section>
      
    </main>
  </body>
</html>
