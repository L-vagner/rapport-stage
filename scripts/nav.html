<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rapport Ludovic Vagner</title>
    <link rel="stylesheet" href="../style.css" />
    <script src="./nav.js" defer></script>
  </head>

  <body>
    <header>
      <h2>Rapport de stage, Ludovic Vagner</h2>
    </header>
    <nav class="pages"></nav>
    <main>
      <section>
        <h2>Le script</h2>
        <pre class="js-code">
    <span class="syntax-purple">const</span> ROOT = location.pathname.<span class="syntax-blue">match</span>(/.*(?&lt; root &gt;rapport-stage)/)[0];
    <span class="syntax-purple">const</span> IsLOCAL = location.protocol == 'file:';
    <span class="syntax-purple">let</span> nav = document.<span class="syntax-blue">querySelector</span>('nav.pages');


    <span class="syntax-purple">class</span> <span class="syntax-yellow">Anchor</span> {
        /**
        * 
        * @<span class="syntax-purple">param</span> {<span class="syntax-yellow">string</span>} name <span class="syntax-grey">Nom de l'élement dans le DOM</span>
        * @<span class="syntax-purple">param</span> {<span class="syntax-yellow">string</span>} text <span class="syntax-grey">Text affiché sur la page</span>
        * @<span class="syntax-purple">param</span> {<span class="syntax-yellow">string</span>} href <span class="syntax-grey">Chemin relatif depuis le répertoire racine du portfolio</span>
        */
        <span class="syntax-purple">constructor</span>(name, text, href) {
            <span class="syntax-cyan">this</span>.name = name;
            <span class="syntax-cyan">this</span>.text = text;
            <span class="syntax-cyan">this</span>.href = href;
        }
        /**
        * 
        * @<span class="syntax-purple">returns</span> {<span class="syntax-yellow">Element</span>} L'élément &lt;a &gt; affiché dans la page
        */
        <span class="syntax-blue">createElement</span>() {
            <span class="syntax-purple">let</span> a = document.<span class="syntax-blue">createElement</span>("a");
            a.className = <span class="syntax-cyan">this</span>.name;
            a.innerText = <span class="syntax-cyan">this</span>.text;
            <span class="syntax-purple">let</span> div = <span class="syntax-cyan">this</span>.<span class="syntax-blue">getPathDiv</span>();
            a.href = <span class="syntax-cyan">this</span>.<span class="syntax-blue">makeLink</span>(<span class="syntax-cyan">this</span>.href, div);
            <span class="syntax-cyan">return</span> a;

        }
        /**
        * 
        * @<span class="syntax-purple">returns</span> string le séparateur d'arborescence
        */
        <span class="syntax-blue">getPathDiv</span>() {
            <span class="syntax-purple">let</span> div = '';
            <span class="syntax-cyan">if</span> (IsLOCAL)
            div = '/';
            <span class="syntax-cyan">else</span>
            div = `\u005c`;
            <span class="syntax-cyan">return</span> div;
        }
        <span class="syntax-blue">makeLink</span>(url, repoDiv) {
            return ROOT + repoDiv + url;
        };
    }
    <span class="syntax-purple">const</span> pages = [
        <span class="syntax-cyan">new</span> <span class="syntax-yellow">Anchor</span>('index', 'Page d\'introduction', 'index.html'),
        <span class="syntax-cyan">new</span> <span class="syntax-yellow">Anchor</span>('artimbale', 'Introduction artimbale', 'artimbale.html'),
        <span class="syntax-cyan">new</span> <span class="syntax-yellow">Anchor</span>('rapports', 'Rapport hebdomadaire', 'rapports/main.html'),
        <span class="syntax-cyan">new</span> <span class="syntax-yellow">Anchor</span>('scripts', 'Scripts crée pour le rapport de stage', 'scripts/script.html')
    ]
    pages.<span class="syntax-blue">forEach</span>(object => { nav.<span class="syntax-blue">append</span>(object.<span class="syntax-blue">createElement</span>()); }
    );
                </pre>
                <ul>A ajouter:
                  <li>Plus de colorage de syntaxe</li>
                  <li>Explication du script</li>
                </ul>
      </section>
    </main>
  </body>
</html>
